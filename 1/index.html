<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="box">
        <img class="img1" src="./C86AC59B-F30C-4DD2-83E4-04D59D520A56.png"><span class="s1">To-DoList</span>
        <h3>~ Today l need to ~</h3>
        <input class="ipt" type="text" placeholder="Add new todo..."><button>Submit</button>
        <ul>
        </ul>
        <p><span class="a1">0item left</span><span class="a2">All</span><span class="a3">Ac</span><span
                class="a4">com</span><span class="a5">clear</span></p>
    </div>
</body>

</html>
<script>
    var b = 0;
    var c = 0;
    var a = 0;
    var ipt = document.querySelector('input')
    var btn = document.querySelector('button')
    var ul = document.querySelector('ul')
    var body = document.querySelector('body')
    var a1 = document.querySelector('.a1')
    var a2 = document.querySelector('.a2')
    var a3 = document.querySelector('.a3')
    var a4 = document.querySelector('.a4')
    var a5 = document.querySelector('.a5')
    btn.onclick = function () {
        if (ipt.value == '') {
            alert('内容为空')
            return
        }
        var li = document.createElement("li")
        li.innerHTML = `<input type="checkbox" ss="1" class="ipt1"><span>${ipt.value}</span><span class="aa" bb='${a++}'>x</span>`
        console.log(li);
        var li1 = document.querySelectorAll('li')
        a1.innerHTML = a + 'item left'
        ul.insertBefore(li, li1[0])
        ipt.value = ''
        var s2 = document.querySelectorAll('.aa')
        var ipt1 = document.querySelectorAll('.ipt1')
        for (var i = 0; i < s2.length; i++) {
            s2[i].onclick = function () {
                ul.removeChild(this.parentNode)
                console.log(this);
                a--;
            }
        }
        for (var i = 0; i < ipt1.length; i++) {
            // ipt1[i].setAttribute('ss', 1)
            ipt1[i].setAttribute('id', i)
            ipt1[i].addEventListener('click', function (e) {
                var bb = 0
                console.log(this.getAttribute('id'));
                console.log(e.path[0]);
                var tt = this.getAttribute('id')
                // if (ipt1[tt].getAttribute('ss') == 1) {
                //     // var tt = this.getAttribute('id')
                //     ipt1[tt].setAttribute('ss', 2)
                //     this.parentNode.style.background = "red"
                // } else {
                //     // var tt = this.getAttribute('id')
                //     ipt1[tt].setAttribute('ss', 1)
                //     this.parentNode.style.background = ""
                // }
                for (var j = 0; j < ipt1.length; j++) {
                    if (ipt1[j].getAttribute('ss') == 2) {
                        bb++
                        b=bb
                        a3.style.display = 'inline-block'
                    } else {
                        c++
                    }
                }
                // console.log(b);

            })
        }
        // for (var i = 0; i < ipt1.length; i++) {
        //     // ipt1[i].setAttribute('ss', 1)
        //     ipt1[i].setAttribute('id', i)
        //     ipt1[i].addEventListener('click', function (e) {
        //         var bb = 0
        //         // console.log(this.getAttribute('id'));
        //         // console.log(e.path[0]);
        //         // var tt = this.getAttribute('id')
        //         if (this.getAttribute('ss') == 1) {
        //             // var tt = this.getAttribute('id')
        //             this.setAttribute('ss', 2)
        //             this.parentNode.style.background = "red"
        //             return false
        //         } else {
        //             // var tt = this.getAttribute('id')
        //             this.setAttribute('ss', 1)
        //             this.parentNode.style.background = ""
        //             return false
        //         }
        //         // for (var j = 0; j < ipt1.length; j++) {
        //         //     if (ipt1[j].getAttribute('ss') == 2) {
        //         //         bb++
        //         //         b=bb
        //         //         a3.style.display = 'inline-block'
        //         //     } else {
        //         //         c++
        //         //     }
        //         // }
        //         // console.log(b);

        //     })
        // }
        if(b>0){
            a3.style.display = 'inline-block'
        }else{
            a3.style.display = 'none'
        }
        // for(var i =0;i<ipt1.length;i++){
        //     if (ipt1[i].getAttribute('ss')==0) {
        //         a3.style.display = 'inline-block'
        //     }
        // }
        a2.onclick = function () {
            for (var i = 0; i < li1.length; i++) {
                li1[i].style.display = "block"
            }
        }
        a3.onclick = function () {
            for (var i = 0; i < ipt1.length; i++) {
                if (ipt1[i].getAttribute('ss') == 2) {
                    ipt1[i].parentNode.style.display = 'none'
                } else {
                    ipt1[i].parentNode.style.display = 'block'
                }
            }
        }
        a4.onclick = function () {
            for (var i = 0; i < ipt1.length; i++) {
                if (ipt1[i].getAttribute('ss') == 1) {
                    ipt1[i].parentNode.style.display = 'none'
                } else {
                    ipt1[i].parentNode.style.display = 'block'
                }

            }
        }
        a5.onclick = function () {
            for (var i = 0; i < ipt1.length; i++) {
                if (ipt1[i].getAttribute('ss') == 2) {
                    ul.removeChild(ipt1[i].parentNode)
                } else {
                    ipt1[i].parentNode.style.display = 'block'
                }
            }
        }
    }
    
    ipt.addEventListener('keyup', function (e) {
        if (ipt.value == '') {
            alert('内容为空')
            return
        }
        if (e.keyCode == 13) {
            var li = document.createElement("li")
            li.innerHTML = `<input type="checkbox"><span>${ipt.value}</span><span class="aa">x</span>`
            console.log(li);
            var li1 = document.querySelectorAll('li')
            ul.insertBefore(li, li1[0])
            ipt.value = ''
            var s2 = document.querySelectorAll('.aa')
            for (var i = 0; i < s2.length; i++) {
                s2[i].onclick = function () {
                    ul.removeChild(this.parentNode)
                    console.log(this);
                    a--;
                }
            }
            for (var i = 0; i < ipt1.length; i++) {
                ipt1[i].setAttribute('ss', 1)
                ipt1[i].addEventListener('change', function () {
                    console.log(this);
                    if (this.getAttribute('ss') == 1) {
                        this.setAttribute('ss', 2)
                        this.parentNode.style.background = "red"
                    } else {
                        this.setAttribute('ss', 1)
                        this.parentNode.style.background = ""
                    }
                })
            }
            if (li1.length > 0) {
                a3.style.display = 'inline-block'
            }
            a2.onclick = function () {
                for (var i = 0; i < li1.length; i++) {
                    li1.style.display = "block"
                }
            }
            a3.onclick = function () {
                for (var i = 0; i < ipt1.length; i++) {
                    if (ipt1[i].getAttribute('ss') == 2) {
                        ipt1[i].parentNode.style.display = 'none'
                    } else {
                        ipt1[i].parentNode.style.display = 'block'
                    }
                }
            }
            a4.onclick = function () {
                for (var i = 0; i < ipt1.length; i++) {
                    if (ipt1[i].getAttribute('ss') == 1) {
                        ipt1[i].parentNode.style.display = 'none'
                    } else {
                        ipt1[i].parentNode.style.display = 'block'
                    }

                }
            }
            a5.onclick = function () {
                for (var i = 0; i < ipt1.length; i++) {
                    if (ipt1[i].getAttribute('ss') == 2) {
                        ul.removeChild(ipt1[i].parentNode)
                    } else {
                        ipt1[i].parentNode.style.display = 'block'
                    }
                }
            }
        }
    })

</script>
<style>
    body {
        background: pink;
    }

    .box {
        /* text-align: center; */
        position: absolute;
        top: 50%;
        left: 50%;
        background: #fff;
        width: 400px;
        /* height: 500px; */
        transform: translate(-50%, -50%);
    }

    .img1 {
        margin-left: 60px;
        margin-top: 20px;
        width: 120px;
        height: 100px;
    }

    .s1 {
        background-color: orangered;
        padding: 10px 20px;
        color: #fff;
        font-weight: 600;
        position: absolute;
        top: 50px;
    }

    h3 {
        text-align: center;
    }

    .ipt {
        margin-top: 5px;
        border: none;
        border-bottom: 2px dashed orangered;
        margin-left: 80px;
    }

    button {
        margin-left: 10px;
    }

    .aa {
        float: right;
    }

    li {
        margin: 10px 10px;
    }

    .a3 {
        display: none;
        margin: 0 10px;
    }

    .a2 {
        margin: 0 10px;
    }

    .a4 {
        margin: 0 10px;
    }

    .a5 {
        margin: 0 10px;
    }
</style>